<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="shortcut icon" type="x-icon" href="../assets/ec.png" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ethan Cratchley - Garden</title>
    <link rel="stylesheet" href="../styles/styles.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Baskervville:ital@0;1&display=swap"
      rel="stylesheet"
    />
    <!-- Google tag (gtag.js) -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-Q0VMMDZE5J"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());
      gtag("config", "G-Q0VMMDZE5J");
    </script>
    <script src="../scripts/searchIndex.js"></script>
    <script defer src="../scripts/script.js"></script>
    <script defer src="scripts/thought-stream.js"></script>
    <script defer src="scripts/resource-filter.js"></script>
  </head>
  <body>
    <!-- Left-Side Navigation -->
    <header>
      <nav>
        <ul class="legend">
          <li><a href="/">Home</a></li>
          <li><a href="../writing/">Writing</a></li>
          <li><a href="../experience/">Experience</a></li>
          <li><a href="../projects/">Projects</a></li>
          <li><a href="../contact/">Contact</a></li>
          <li>
            <a href="../garden/" class="active" style="font-style: italic"
              >Garden</a
            >
          </li>
        </ul>
      </nav>
    </header>

    <!-- Main Content -->
    <main>
      <!-- Garden Section -->
      <section id="garden" class="fade-in">
        <div class="bio-header">
          <h1>Ethan Cratchley - Garden</h1>
        </div>

        <!-- Mobile Thought Stream (visible only on mobile) -->
        <div class="mobile-thought-stream">
          <h2>Recent Thoughts</h2>
          <div id="mobile-thoughts" class="mobile-thoughts-container">
            <!-- Thoughts will be injected here on mobile -->
          </div>
        </div>

        <!-- Resources Library -->
        <div class="resources-library">
          <!-- Filter Tabs -->
          <div class="resource-filters">
            <button class="resource-filter-btn active" data-filter="all">
              All
            </button>
            <button class="resource-filter-btn" data-filter="websites">
              Websites
            </button>
            <button class="resource-filter-btn" data-filter="videos">
              Videos
            </button>
            <button class="resource-filter-btn" data-filter="books">
              Books
            </button>
            <button class="resource-filter-btn" data-filter="papers">
              Papers
            </button>
            <button class="resource-filter-btn" data-filter="notes">
              Notes
            </button>
          </div>

          <!-- Category Dropdown -->
          <div class="category-filter-container">
            <button id="category-filter-btn" class="category-filter-btn">
              All Categories
              <span class="category-arrow">‚ñº</span>
            </button>
            <div id="category-dropdown" class="category-dropdown">
              <div class="category-option active" data-category="all">
                All Categories
              </div>
              <div class="category-option" data-category="blog">Blog</div>
              <div class="category-option" data-category="tutorial">
                Tutorial
              </div>
              <div class="category-option" data-category="ai/ml">AI/ML</div>
              <div class="category-option" data-category="textbook">
                Textbook
              </div>
              <div class="category-option" data-category="fiction">Fiction</div>
              <div class="category-option" data-category="tool">Tool</div>
              <div class="category-option" data-category="finance">Finance</div>
              <div class="category-option" data-category="startups">
                Startups
              </div>
            </div>
          </div>

          <!-- Resource List -->
          <div id="resource-list" class="resource-list">
            <!-- Resources will be injected here by JavaScript -->
            <p class="loading-state">Loading resources...</p>
          </div>
        </div>
      </section>
    </main>

    <!-- Footer -->
    <footer>
      <div class="footer-info">
        <div>
          LinkedIn
          <a href="https://www.linkedin.com/in/ethan-cratchley/" target="_blank"
            >@Ethan Cratchley</a
          >
        </div>
        <div>
          GitHub
          <a href="https://github.com/EthanCratchley" target="_blank"
            >@EthanCratchley</a
          >
        </div>
        <div>
          X
          <a href="https://x.com/EthanCratchley" target="_blank"
            >@EthanCratchley</a
          >
        </div>
        <div>
          Email
          <a href="mailto:ethankcratchley@gmail.com"
            >ethankcratchley@gmail.com</a
          >
        </div>
      </div>
    </footer>

    <!-- Search Toggle Button -->
    <button
      id="search-toggle"
      class="search-toggle-btn"
      aria-label="Search"
      title="Search (‚åòK)"
    >
      <span class="search-icon" aria-hidden="true">
        <svg
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <circle cx="11" cy="11" r="8"></circle>
          <path d="m21 21-4.35-4.35"></path>
        </svg>
      </span>
    </button>

    <!-- Theme Toggle Button -->
    <button
      id="theme-toggle"
      class="theme-toggle-btn"
      aria-label="Toggle dark mode"
      title="Toggle theme"
    >
      <span class="theme-icon" aria-hidden="true"></span>
    </button>

    <!-- Search Modal -->
    <div
      id="search-modal"
      class="search-modal"
      role="dialog"
      aria-modal="true"
      aria-labelledby="search-input"
      hidden
    >
      <div class="search-backdrop"></div>
      <div class="search-container">
        <div class="search-input-wrapper">
          <span class="search-input-icon">üîç</span>
          <input
            type="text"
            id="search-input"
            class="search-input"
            placeholder="Search for projects, writing..."
            autocomplete="off"
            autocorrect="off"
            spellcheck="false"
            aria-label="Search"
          />
        </div>
        <div id="search-results" class="search-results"></div>
        <div class="search-footer">
          <span>‚Üë‚Üì Navigate</span>
          <span>‚Üµ Select</span>
          <span>ESC Close</span>
        </div>
      </div>
    </div>

    <!-- Script to populate mobile thoughts -->
    <script>
      // Populate mobile thought stream on mobile devices
      if (window.innerWidth <= 768) {
        fetch("/garden/data/thoughts.json")
          .then((response) => response.json())
          .then((thoughts) => {
            const container = document.getElementById("mobile-thoughts");
            if (container) {
              // Show 5 most recent thoughts
              const recentThoughts = thoughts.slice(0, 5);
              container.innerHTML = recentThoughts
                .map(
                  (thought) => `
                  <div class="mobile-thought-item">
                    <p>${thought.text}</p>
                  </div>
                `
                )
                .join("");
            }
          })
          .catch((error) => {
            console.error("Failed to load mobile thoughts:", error);
          });
      }
    </script>
  </body>
</html>
